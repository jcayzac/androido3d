//	MainLoop.meta
//	Copyright (C) 2008 Chris Pruett.		c_pruett@efn.org
//
//	FarClip Engine
//
//	Licensed under the Apache License, Version 2.0 (the "License");
//	you may not use this file except in compliance with the License.
//	You may obtain a copy of the License at
//
//			http://www.apache.org/licenses/LICENSE-2.0
//
//	Unless required by applicable law or agreed to in writing, software
//	distributed under the License is distributed on an "AS IS" BASIS,
//	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//	See the License for the specific language governing permissions and
//	limitations under the License.

#include "ObjectManager.h"
#include "Renderer.h"
#include "System.h"
#include "TimeSystem.h"

metaclass MainLoop
{
	base System
	
	function MainLoop() { public } 
	function ~MainLoop() { public } 
	
	function void updateAll() { public }	 // updates the time, the game, and draws 
	function void updateTime() { public }	// updates just the time step 
	function void updateGame() { public }	// updates just the game and draws
	
	function void addSystem(System* pSystem) { public } 
	function void removeSystem(System* pSystem) { public } 
	function void removeAllSystems() { public } 
	
	field mTimeSystem { type TimeSystem*, ref count, private } 
	set mTimeSystem { public } // autoset exposed for OS-specific time control
		
	field mSystems { type ObjectManager<System>, private }
	field mCurrentTime { type float, private }
}

inline MainLoop::MainLoop() 
	: mTimeSystem(NULL), mCurrentTime(0.0f)
{ 
} 

inline MainLoop::~MainLoop() 
{
	removeAllSystems(); 
}
